---
title: Основные команды 
slug: task1
abstract:
---
## Первый расчет с LAMMPS

Чтобы разобраться, как работать с LAMMPS, мы будем моделировать фуллерен С60. Если вы работаете с нашей [виртуальной машиной](https://mdcrashcourse.github.io/vm.html), то для первого примера переходим в:

```liquid
cd /home/workshop/_PracticeLAMMPS/C60_task1
```

Если нет - все необходимые для расчетов файлы можно скачать с гитхаба:

```liquid
git clone https://github.com/mdcrashcourse/course_data/tree/main/Examples LAMMPS_examples
```

или вручную по [ссылке](https://github.com/mdcrashcourse/course_data/tree/main/Examples). А потом так же перейти в папку `C60_task1`.


Результат нашего расчета будет выглядеть примерно так:

{% include figure.html
    url="/assets/pics/lammps/wall.gif"
    class="row"
%}
но обо всём по порядку.


## Входные файлы: что нам нужно для МД расчета?

- **Data-файл**. Файл с позициями атомов, он же data-файл. Обычно имеет имя вида `*.data`. В нашем примере это `C60.data`.
- **Файл потенциала**. Информация о том, как атомы из `*.data` будут взаимодействовать. То есть описание межатомного потенциала. Иногда эта информация записывается в виде отдельного файла (как в наших примерах), иногда параметры напрямую указываются в так называемом `in-файле`, о котором ниже. В нашем примере это `ffield_reax.cho2016`.
- **In-файл**. Инструкции о том, каким воздействиям мы подвергнем атомы из `*.data`: нагреем, сдавим, придадим поступательный импульс и т.д. В общем, описание физики, которая будет происходить с нашей системой. Это и будет наш файл с инструкциями или `"in-файл"` и основную часть времени мы будем работать именно с ним. В нашем примере это `in.fullerene`.


## Data-файл

Давайте откроем `C60.data` и прочитаем кооментарии после "#":

```liquid
#Coord for fullerene                          #первая строчка - любой комментарий. Комментарии, как вы заметили, выделяются символом "#"
60 atoms                                      #количество атомов (у нас 60)
1 atom types                                  #количество типов атомов (у нас один - углерод)

0 10.00000 xlo xhi                            #размер расчётной ячейки по X, Y и Z. Почти всегда в ангстремах, но возможны исключения. 
0 10.00000 ylo yhi
0 10.00000 zlo zhi

Masses

1 12.0107                                     #масса атома, принадлежащего к типу 1 (т.е. углерода)

Atoms

1 1 0  8.393362 5.601346 4.688575             #далее идут 60 строк с описанием параметров каждого отдельного атома
2 1 0  8.393783 4.315589 5.234898             #по порядку столбцы обозначают: 1 - порядковый номер атома, 2 - его тип
3 1 0  1.506611 5.601348 4.688592             #3 - заряд, 4,5,6 - декартовы координаты
...
...
```

## Файл потенциала

Теперь откроем `ffield_reax.cho2016` и договоримся, что никогда не будем его модифицировать. Когда вы используете в своих расчетах какой-то МД потенциал, главный вопрос, который должен вас волновать: подходит ли он для описываемой системы. Для этого надо выяснить, кто и для чего его создавал и как он верифицировался. Например, если вы возьмете потенциал, разработанный для алмаза, и начнёте применять его для углеродных нанотрубок, скорее всего ничего путного не выйдет. Хотя в обоих случаях речь идёт про углерод. И такие истории в научной практике, к сожалению, не редки. 
Потенциал из нашего примера был разработан авторами [вот этой статьи](https://pubs.acs.org/doi/abs/10.1021/acs.jpca.6b12429). Они провели много квантово-химических расчетов, чтобы подобрать коэффициенты в `ffield_reax.cho2016` нужным образом. Если мы их начнём менять, вся магия сломается. О том, как делать свои собственные потенциалы мы поговорим в главе [про машинно-обучаемые потенциалы](https://mdcrashcourse.github.io/mtp.html).



## In-файл

И, наконец, открываем `in.fullerene`:

```liquid
#Example fullerene at T=1000 K for 1 ps                           #комментарий

units                   real                                      #ед. измерения (пока не меняем). Эта команда определяет, работаем мы в ангстремах и фемтосекундах или чём-то другом
atom_style              charge                                    #формат, в котором записаны координаты атомов в C60.data (тоже не меняем) 

read_data               C60.data                                  #подгружаем наш data-файл

pair_style              reax/c NULL                               #три команды, которые инициализируют нужный нам потенциал взаимодействия и подгружают файл ffield_reax.cho2016
pair_coeff              * * ffield_reax.cho2016 C
fix                     chg all qeq/reax 1 0.0 10.0 1.0e-6 reax/c


thermo_style    custom  step time temp pe ke etotal press vol     #список макроскопических свойств системы (потенц. энергия, давление и т.д.), которые мы будем выводить в ходе расчета
thermo          100

dump            1 all cfg 250 ./c60.*.cfg mass type xs ys zs      #dump - команды, которые записывают положения атомов в ходе расчета каждые 250 шагов. Будут нужны для визуализации
dump            2 all custom 250 ./c60.*.pos id type x y z

timestep        0.1                                               #шаг численного интегрирования (у нас он в фс – см units real в мануале)

fix             1 all nvt temp 1000 1000 20                       #единственная команда, которая что-то делает (удерживает темпертатуру системы на уровне 1000 К) 

run             10000                                             #просим провести расчет длительностью 10000 шагов (шаг у нас 0.1 фс, т.е. 1000 фс)

```

---



## Запуск расчета и визуализация результатов

Для запуска первого примера надо перейти в папку `LAMMPS_examples/task1` и выполнить команду:

```liquid
lammps -in in.fullerene -log fullerene.log
```

Анализ результатов расчета в видео:

{% include youtube.html id="R2JVpkmeERo" %}

---

---
